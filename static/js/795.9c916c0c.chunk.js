"use strict";(self.webpackChunkai_detective=self.webpackChunkai_detective||[]).push([[795],{2795:function(e,r,t){t.r(r),t.d(r,{FewShotPromptTemplate:function(){return b}});var a=t(3433),i=t(1413),n=t(4165),l=t(5861),p=t(5671),s=t(3144),o=t(7326),u=t(136),c=t(9388),f=t(8799),m=t(9649),x=t(4757),b=function(e){(0,u.Z)(t,e);var r=(0,c.Z)(t);function t(e){var a;if((0,p.Z)(this,t),a=r.call(this,e),Object.defineProperty((0,o.Z)(a),"examples",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,o.Z)(a),"exampleSelector",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,o.Z)(a),"examplePrompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,o.Z)(a),"suffix",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty((0,o.Z)(a),"exampleSeparator",{enumerable:!0,configurable:!0,writable:!0,value:"\n\n"}),Object.defineProperty((0,o.Z)(a),"prefix",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty((0,o.Z)(a),"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:"f-string"}),Object.defineProperty((0,o.Z)(a),"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.assign((0,o.Z)(a),e),void 0!==a.examples&&void 0!==a.exampleSelector)throw new Error("Only one of 'examples' and 'example_selector' should be provided");if(void 0===a.examples&&void 0===a.exampleSelector)throw new Error("One of 'examples' and 'example_selector' should be provided");if(a.validateTemplate){var i=a.inputVariables;a.partialVariables&&(i=i.concat(Object.keys(a.partialVariables))),(0,m.af)(a.prefix+a.suffix,a.templateFormat,i)}return a}return(0,s.Z)(t,[{key:"_getPromptType",value:function(){return"few_shot"}},{key:"getExamples",value:function(){var e=(0,l.Z)((0,n.Z)().mark((function e(r){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===this.examples){e.next=2;break}return e.abrupt("return",this.examples);case 2:if(void 0===this.exampleSelector){e.next=4;break}return e.abrupt("return",this.exampleSelector.selectExamples(r));case 4:throw new Error("One of 'examples' and 'example_selector' should be provided");case 5:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()},{key:"partial",value:function(){var e=(0,l.Z)((0,n.Z)().mark((function e(r){var a,l;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(l=(0,i.Z)({},this)).inputVariables=this.inputVariables.filter((function(e){return!(e in r)})),l.partialVariables=(0,i.Z)((0,i.Z)({},null!==(a=this.partialVariables)&&void 0!==a?a:{}),r),e.abrupt("return",new t(l));case 4:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()},{key:"format",value:function(){var e=(0,l.Z)((0,n.Z)().mark((function e(r){var t,i,l,p,s=this;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.mergePartialAndUserVariables(r);case 2:return t=e.sent,e.next=5,this.getExamples(t);case 5:return i=e.sent,e.next=8,Promise.all(i.map((function(e){return s.examplePrompt.format(e)})));case 8:return l=e.sent,p=[this.prefix].concat((0,a.Z)(l),[this.suffix]).join(this.exampleSeparator),e.abrupt("return",(0,m.SM)(p,this.templateFormat,t));case 11:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()},{key:"serialize",value:function(){if(this.exampleSelector||!this.examples)throw new Error("Serializing an example selector is not currently supported");if(void 0!==this.outputParser)throw new Error("Serializing an output parser is not currently supported");return{_type:this._getPromptType(),input_variables:this.inputVariables,example_prompt:this.examplePrompt.serialize(),example_separator:this.exampleSeparator,suffix:this.suffix,prefix:this.prefix,template_format:this.templateFormat,examples:this.examples}}}],[{key:"deserialize",value:function(){var e=(0,l.Z)((0,n.Z)().mark((function e(r){var a,i,l;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.example_prompt){e.next=3;break}throw new Error("Missing example prompt");case 3:return e.next=5,x.PromptTemplate.deserialize(a);case 5:if(i=e.sent,!Array.isArray(r.examples)){e.next=10;break}l=r.examples,e.next=11;break;case 10:throw new Error("Invalid examples format. Only list or string are supported.");case 11:return e.abrupt("return",new t({inputVariables:r.input_variables,examplePrompt:i,examples:l,exampleSeparator:r.example_separator,prefix:r.prefix,suffix:r.suffix,templateFormat:r.template_format}));case 12:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()}]),t}(f.Al)}}]);
//# sourceMappingURL=795.9c916c0c.chunk.js.map